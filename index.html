
<!DOCTYPE html>
<html>
<head>
  <title>thunderstorm</title>
</head>

  <style>
    body {
      background: MidnightBlue;
    }

      #ground {
        position: absolute;

        left: 0;
        right: 0;
        bottom: 0;
        height: 50px;

        background: black;
      }
    #tree {
      position: absolute;

      left: 0;
      bottom: 0;

      height: 200px;
      width: 200px;
    }

  </style>

  <body>
    <div id="ground"></div>
    <img id="tree" src="tree.png" />
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.15/howler.min.js"></script>

  <script>
    var rain = new Howl({
      src: 'rain.mp3',
      volume: 0.2
    })

    var body = document.body

    function flashOn() {
      console.log('Flashing On')
      body.style.background = 'white'

      // setTimeout will call flashOff after 10ms
      setTimeout(flashOff, 10)

      // There is a 75% chance that each flash will trigger another flash
      if (Math.random() < 0.75) {
        setTimeout(flashOn, 50 + Math.random() * 450)
      }
    }

    function flashOff() {
      console.log('Flashing Off')
      body.style.background = 'MidnightBlue'
    }

    var firstClick = true

    function click() {
      console.log('Clicking')
      flashOn()

      // If this is the first click, start the rain and set firstClick to false.
      if (firstClick) {
        rain.play()
        firstClick = false
      }
    }

    // This Event Listener will trigger a flash with every click
    window.addEventListener('click', click)
  </script>
</html>